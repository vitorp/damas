
.data

CONT:		.word 216
INIT:		.word 0
NOTAS:		.word 59, 83, 52, 76, 64, 52, 83, 59, 76, 83, 71, 76, 71, 59, 59, 83, 52, 59, 71, 76, 59, 83, 64, 78, 52, 97, 76, 83, 71, 80, 72, 71, 76, 64, 76, 90, 78, 52, 59, 76, 78, 59, 76, 76, 78, 45, 52, 67, 55, 86, 62, 45, 55, 81, 76, 88, 52, 52, 62, 52, 90, 52, 45, 76, 62, 90, 45, 52, 80, 52, 59, 76, 62, 78, 59, 71, 71, 59, 62, 62, 59, 52, 59, 76, 95, 83, 83, 59, 83, 71, 59, 64, 83, 52, 79, 98, 71, 59, 83, 76, 60, 45, 67, 80, 81, 47, 60, 79, 76, 48, 84, 79, 72, 100, 76, 64, 72, 48, 79, 84, 72, 48, 79, 60, 48, 67, 47, 55, 79, 76, 48, 79, 48, 84, 72, 74, 60, 81, 94, 45, 60, 100, 79, 81, 79, 48, 84, 79, 81, 100, 79, 94, 69, 69, 81, 84, 69, 72, 81, 48, 69, 60, 55, 48, 84, 48, 69, 81, 69, 69, 52, 45, 64, 60, 69, 83, 48, 69, 83, 60, 81, 64, 55, 48, 83, 64, 76, 92, 83, 48, 84, 64, 67, 48, 48, 64, 83, 47, 56, 81, 45, 50, 69, 50, 79, 74, 98, 81, 90, 86, 62, 45, 56, 57, 81, 90
DURACAO:	.word 13, 3, 15, 8, 11, 55, 4, 22, 16, 6, 15, 20, 8, 5, 5, 3, 20, 6, 7, 4, 32, 3, 18, 57, 45, 16, 19, 4, 6, 3, 2, 166, 4, 15, 15, 83, 14, 42, 4, 5, 6, 3, 7, 3, 4, 4, 2, 52, 3, 14, 8, 5, 5, 27, 13, 50, 2, 2, 17, 3, 11, 14, 5, 5, 26, 3, 3, 4, 3, 65, 9, 10, 16, 3, 15, 8, 22, 7, 9, 10, 14, 44, 18, 74, 3, 3, 4, 5, 6, 6, 19, 24, 10, 42, 44, 41, 12, 11, 3, 11, 5, 2, 43, 2, 99, 2, 29, 13, 11, 31, 6, 23, 15, 4, 11, 32, 8, 6, 16, 8, 12, 10, 7, 42, 7, 5, 3, 25, 7, 215, 9, 5, 9, 4, 32, 15, 9, 9, 15, 3, 71, 4, 10, 3, 7, 56, 25, 4, 5, 26, 12, 3, 4, 7, 6, 10, 6, 10, 29, 3, 23, 51, 36, 5, 3, 7, 5, 44, 5, 11, 8, 3, 25, 22, 4, 7, 9, 6, 7, 52, 4, 8, 22, 9, 7, 10, 58, 3, 25, 9, 3, 17, 7, 11, 4, 6, 24, 2, 3, 11, 2, 2, 58, 55, 54, 13, 3, 7, 3, 14, 22, 2, 2, 14, 13, 3
#DURACAO:	.word 576, 96, 96, 96, 96, 768, 192, 96, 96, 96, 96, 768, 192, 96, 96, 192, 96, 96, 96, 96, 192, 192, 96, 96, 96, 96, 768, 192, 96, 96, 96, 96, 768, 192, 96, 96, 192, 96, 96, 96, 96, 192, 192, 960, 192, 96, 288, 384, 288, 288, 192, 96, 288, 384, 288, 192, 192, 96, 288, 384, 288, 480, 384, 960, 192, 96, 288, 384, 192, 384, 192, 96, 288, 768, 192, 96, 288, 384, 384, 384, 384, 960, 192, 192, 192, 960, 96, 96, 288, 2688, 96, 192, 960, 96, 96, 288, 384, 384, 384, 384, 384, 2304, 96, 192, 960, 192, 96, 192, 384, 192, 384, 192, 96, 288, 384, 288, 192, 192, 96, 192, 672, 96, 96, 384, 192, 192, 960, 192, 192, 1152, 192, 96, 288, 96, 96, 96, 2400, 192, 192, 960, 192, 96, 192, 384, 192, 384, 192, 192, 96, 96, 96, 2688, 96, 96, 96, 96, 768, 192, 96, 96, 96, 96, 768, 192, 96, 96, 192, 96, 96, 96, 96, 192, 192, 96, 96, 96, 96, 768, 192, 96, 96, 96, 96, 768, 192, 96, 96, 192, 96, 96, 96, 96, 192, 192, 960, 192, 96, 288, 384, 288, 288, 192, 96, 288, 384, 288, 192, 192, 96, 288, 384, 288, 480, 384, 960, 192, 96, 288, 384, 192, 384, 192, 96, 288, 768, 192, 96, 288, 384, 384, 384, 384, 960, 192, 192, 192, 960, 96, 96, 288, 2688, 96, 192, 960, 96, 96, 288, 384, 384, 384, 384, 384, 2304, 96, 192, 960, 192, 96, 192, 384, 192, 384, 192, 96, 288, 384, 288, 192, 192, 96, 192, 672, 96, 96, 384, 192, 192, 960, 192, 192, 1152, 192, 96, 288, 96, 96, 96, 2400, 192, 192, 960, 192, 96, 192, 384, 192, 384, 192, 192, 96, 96, 96, 2688
#DELAY:		.word 0, 0, 60, 30, 30, 30, 30, 30, 60, 30, 30, 30, 0, 30, 30, 30, 30, 0, 60, 30, 30, 30, 30, 30, 60, 30, 0, 30, 30, 0, 60, 30, 30, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 0, 30, 0, 0, 30, 0, 0, 0, 30, 0, 30, 0, 0, 30, 0, 30, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 30, 0, 0, 30, 0, 0, 0, 30, 30, 0, 30, 30, 0, 0, 0, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 0, 30, 0, 0, 30, 0, 0, 0, 30, 0, 30, 0, 0, 30, 0, 30, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 30, 0, 0, 30, 0, 0, 0, 30, 0, 30, 0, 30, 0, 30, 0, 0, 0, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 0, 30, 0, 0, 30, 0, 0, 0, 30, 0, 30, 0, 0, 30, 0, 30, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 30, 0, 0, 30, 0, 0, 0, 30, 30, 0, 30, 30, 0, 0, 0, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 0, 30, 0, 0, 30, 0, 0, 0, 30, 0, 30, 0, 0, 30, 0, 30, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 30, 0, 0, 30, 0, 0, 0, 30, 0, 0, 30, 0, 0, 60, 0, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 0, 30, 0, 0, 30, 0, 0, 0, 30, 0, 30, 0, 0, 30, 0, 30, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 30, 0, 0, 30, 0, 0, 0, 30, 30, 0, 30, 30, 0, 0, 0, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 0, 30, 0, 0, 30, 0, 0, 0, 30, 0, 30, 0, 0, 30, 0, 30, 0, 0, 60, 30, 0, 30, 0, 30, 0, 30, 0, 0, 30, 0, 60, 0, 30, 0, 30, 0, 0, 30, 0, 0, 0, 30, 0, 30, 0, 30, 0, 0
DELAY:		.word 0, 0, 1, 6, 14, 9, 2, 3, 0, 3, 3, 15, 5, 6, 11, 2, 12, 3, 5, 5, 5, 0, 2, 0, 1, 8, 17, 3, 4, 9, 2, 2, 0, 3, 2, 7, 2, 4, 3, 3, 6, 5, 0, 16, 8, 15, 3, 3, 1, 3, 1, 2, 0, 0, 2, 1, 2, 3, 1, 2, 0, 4, 7, 0, 5, 0, 3, 3, 2, 11, 3, 1, 6, 15, 4, 5, 9, 4, 3, 10, 5, 3, 14, 2, 11, 2, 8, 4, 1, 5, 5, 1, 0, 2, 3, 2, 9, 8, 13, 3, 4, 1, 0, 3, 1, 1, 0, 1, 2, 1, 10, 2, 2, 10, 2, 5, 2, 1, 5, 3, 3, 3, 9, 1, 6, 4, 5, 0, 1, 4, 1, 4, 7, 3, 2, 0, 8, 2, 9, 1, 0, 0, 2, 11, 1, 1, 0, 13, 1, 4, 3, 1, 13, 7, 0, 6, 4, 7, 0, 3, 0, 2, 5, 9, 2, 9, 3, 0, 8, 11, 8, 1, 1, 1, 5, 6, 9, 2, 1, 1, 4, 1, 6, 3, 3, 1, 5, 1, 1, 1, 2, 2, 3, 3, 12, 2, 1, 5, 0, 1, 1, 0, 0, 3, 1, 2, 0, 5, 16, 5, 4, 4, 0, 2, 3, 10
VOLUME:		.word 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50
INSTRUMENTO:	.word 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24

.text


.macro	sound(%base_note, %note, %duration, %instrument, %volume)
	lw a0, 0(%note)
	add a0, a0, %base_note
	lw a1, 0(%duration)
	lw a2, 0(%instrument)
	li a3, 250
	jal SOUND
.end_macro
SOUND:
	addi a1,a1,320
	addi t0, zero,  100
	bge s0,t0,PULA_musica
	addi a1,a1,195
	
PULA_musica:	#li $a2,24
	li a7, 31	#syscall for midi
	ecall
	jr ra

.macro	sleep(%duration)
	lw a0, 0(%duration)
	jal SLEEP_musica
.end_macro
SLEEP_musica:
	addi a0,a0,10
	li a7, 32	#syscall for sleep
	ecall
	jr ra

MAIN_music:
	addi sp, sp, -4 #salvar o valor de ra para retornar para a main
 	sw ra, 0(sp)

	lw s0, CONT		#quant de notas
	lw s1, INIT		#nota inicial
	la s2, NOTAS		#notas
	la s3, DURACAO		#duracoes
	la s4, DELAY		#delay
	la s5, VOLUME		#volume
	la s6, INSTRUMENTO	#instrumento
LOOP_musica:
	sound(s1,s2,s3,s6,s5)
	sleep(s4)

	beq s0,zero,  FIM_musica

	addi s0, s0, -1
	addi s2, s2, 4
	addi s3, s3, 4
	addi s4, s4, 4
	addi s5, s5, 4

	j LOOP_musica
FIM_musica:	
	lw ra, 0(sp)
	addi sp, sp, 4
	jr ra
